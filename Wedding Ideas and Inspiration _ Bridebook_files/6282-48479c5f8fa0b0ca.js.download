"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6282],{45811:function(t,e,r){r.d(e,{n:function(){return c}});var n=r(71368),s=r(7953),i=r(63413),a=r(57060),o=r.n(a);class c{get id(){return this.reference.id}get db(){return this.reference.firestore}get namespace(){let t=this.reference,e=[];for(;null!=t.id&&(t instanceof i.hx&&e.unshift(t.id),null!=(t=t.parent)););return e}get path(){return this.reference.path}begin(){this.batch=(0,i.qs)(this.db)}async commit(){if(null!=this.batch){let t=0;for(;t++<3;)try{await this.batch.commit().then(()=>{this.batch=null});break}catch(e){if(3===t)throw e instanceof Error&&!0!==e.message.includes(this.path)&&(e.message=["Failed to commit() on '".concat(this.path,"'."),e.message].join("\n")),e}}return!0}async delete(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0],e=0;for(;;){let r=await (0,i.PL)((0,i.IO)(this.reference,(0,i.Xo)("__name__"),(0,i.b9)(500)));if(0===r.size)return e;let n=(0,i.qs)(this.db),s=[];for(let e of r.docs)s.push(this.getById(e.id,n).delete(t));await Promise.all(s).then(t=>{for(let r of t)e+=r;n.commit()})}}getById(t,e){null==e&&(e=this.batch);let r=new this.document((0,i.JU)(this.reference,t),e);return new Proxy(r,{get:(t,e)=>void 0!==t.collections[e]?t.collections[e.toString()]:t[e]})}push(t){return this.getById(null==t?o()():t)}query(t,e){return null==t?t=(0,i.IO)(this.reference,(0,i.Xo)("__name__")):Array.isArray(t)&&(t=(0,i.IO)(this.reference,...t)),new s.$(t,e)}constructor(t,e){this.document=null,this.reference=null,this.batch=null,"string"==typeof t&&(t=(0,i.hJ)((0,n.ad)(),t)),this.document=e,this.reference=t}}c.definitions={},c.path=null},7953:function(t,e,r){r.d(e,{$:function(){return a}});var n=r(19998),s=r(63413),i=r(18956);class a{agg(t){return(0,s.Hp)(this.query,t).then(t=>t.data())}count(){return(0,s.Yp)(this.query).then(t=>t.data().count)}get(t){return(0,s.PL)(this.query).then(e=>{let r={};return!0===Array.isArray(this.on)?e.docChanges().forEach(e=>{!0===this.on.includes(e.type)&&(!1===t?r[e.doc.id]={event:e.type,snapshot:e.doc}:r[e.doc.id]=e.doc.data())}):e.forEach(e=>{!1===t?r[e.id]={event:"value",snapshot:e}:r[e.id]=e.data()}),r})}getTranslated(t){return this.get(!0).then(e=>(0,n.I)(e,t))}observe(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new i.y(r=>(0,s.cf)(this.query,n=>{let s={};return(!0===Array.isArray(this.on)?n.docChanges().forEach(e=>{!0===this.on.includes(e.type)&&(!1===t?s[e.doc.id]={event:e.type,snapshot:e.doc}:s[e.doc.id]=e.doc.data())}):n.forEach(e=>{!1===t?s[e.id]={event:"value",snapshot:e}:s[e.id]=e.data()}),!0===e)?r.next({result:s,source:n.metadata.hasPendingWrites?"local":"server",fromCache:n.metadata.fromCache}):r.next(s)},t=>r.error(t)))}observeTranslated(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new i.y(r=>(0,s.cf)(this.query,s=>{let i={};return(!0===Array.isArray(this.on)?s.docChanges().forEach(e=>{!0===this.on.includes(e.type)&&(i[e.doc.id]=(0,n.I)(e.doc.data(),t))}):s.forEach(e=>{i[e.id]=(0,n.I)(e.data(),t)}),!0===e)?r.next({result:i,source:s.metadata.hasPendingWrites?"local":"server"}):r.next(i)},t=>r.error(t)))}constructor(t,e){this.on=null,this.query=null,this.query=t,null!=e&&(this.on=e)}}},64778:function(t,e,r){r.d(e,{m8:function(){return o},Ej:function(){return c},Dx:function(){return l},nk:function(){return u}});var n=r(19998),s=r(83049),i=r(63413),a=r(18956);class o{get id(){return this.reference.id}get db(){return this.reference.firestore}get path(){return this.reference.path}collection(t){return(0,i.hJ)(this.reference,t)}async create(t){try{await this.set(t,!1)}catch(e){e instanceof s.ZR&&"invalid-argument"===e.code&&await this.set(t,e.message.includes("cannot be used with set() unless"))}return this}decrement(t){return this.update({[t]:(0,i.nP)(-1)})}async delete(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0],e=0;if(!0===t){let r=[];for(let e in this.collections)r.push(this.collections[e].delete(t));await Promise.all(r).then(t=>{for(let r of t)e+=r})}if(null==this.batch)try{await (0,i.oe)(this.reference)}catch(t){throw t instanceof Error&&!0!==t.message.includes(this.path)&&(t.message=["Failed to delete() on '".concat(this.path,"'."),t.message].join("\n")),t}else this.batch.delete(this.reference);return++e}get(t){return(0,i.QT)(this.reference).then(e=>!1===t?e:e.data())}getTranslated(t){return this.get(!0).then(e=>(0,n.I)(e,t))}async getTranslatableProps(t){if(null==this.translatable)throw Error("Method not implemented. Translatable properties need to be defined in ".concat(this.reference.parent.path," model."));return function t(e){let r=t=>null!=t&&"object"==typeof t&&!0!==Array.isArray(t);if(!0!==r(e))return e;for(let n in e)!0===r(e[n])?e[n]=t(e[n]):void 0===e[n]&&delete e[n],r(e[n])&&0===Object.keys(e[n]).length&&delete e[n];return e}(this.translatable(null!=t?t:await this.get(!0)))}increment(t){return this.update({[t]:(0,i.nP)(1)})}observe(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new a.y(r=>(0,i.cf)(this.reference,n=>{let s=!1===t?n:n.data();return!0!==e?r.next(s):r.next({result:s,source:n.metadata.hasPendingWrites?"local":"server",fromCache:n.metadata.fromCache})},t=>r.error(t)))}observeTranslated(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new a.y(r=>(0,i.cf)(this.reference,s=>{let i=(0,n.I)(s.data(),t);return!0!==e?r.next(i):r.next({result:i,source:s.metadata.hasPendingWrites?"local":"server"})},t=>r.error(t)))}remove(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];let n={};for(let t of e)n[t]=(0,i.AK)();return this.update(n)}async set(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r={["boolean"==typeof e?"merge":"mergeFields"]:e};if(null==this.batch)try{await (0,i.pl)(this.reference,t,r)}catch(t){throw t instanceof Error&&!0!==t.message.includes(this.path)&&(t.message=["Failed to set() on '".concat(this.path,"'."),t.message].join("\n")),t}else this.batch.set(this.reference,t,r);return this.reference.id}async update(t){if(null==this.batch)try{await (0,i.r7)(this.reference,t)}catch(t){throw t instanceof Error&&!0!==t.message.includes(this.path)&&(t.message=["Failed to update() on '".concat(this.path,"'."),t.message].join("\n")),t}else this.batch.update(this.reference,t);return this.reference.id}constructor(t,e){this.collections={},this.reference=null,this.batch=null,null!=e&&(this.batch=e),this.reference=t}}function c(t){let e=t.prototype.create;return t.prototype.create=function(t){return void 0===t.id&&(t.id=this.id),e.apply(this,arguments)},t}function l(t){let e=t.prototype.create;t.prototype.create=function(t){return void 0===t.createdAt&&(t.createdAt=(0,i.Bt)()),e.apply(this,arguments)};let r=t.prototype.set;t.prototype.set=function(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return void 0===t.updatedAt&&(t.updatedAt=(0,i.Bt)()),"boolean"!=typeof e&&(void 0!==t.createdAt&&!0!==e.includes("createdAt")&&e.push("createdAt"),void 0!==t.updatedAt&&!0!==e.includes("updatedAt")&&e.push("updatedAt")),r.apply(this,arguments)};let n=t.prototype.update;return t.prototype.update=function(t){return void 0===t.updatedAt&&(t.updatedAt=(0,i.Bt)()),n.apply(this,arguments)},t}function u(t){let e=t.prototype.set;t.prototype.set=function(t){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return"boolean"!=typeof r?(t.authoredBy=(0,i.AK)(),void 0!==t.authoredBy&&!0!==r.includes("authoredBy")&&r.push("authoredBy")):!0===r&&(t.authoredBy=(0,i.AK)()),e.apply(this,arguments)};let r=t.prototype.update;return t.prototype.update=function(t){return t.authoredBy=(0,i.AK)(),r.apply(this,arguments)},t}},71368:function(t,e,r){r.d(e,{Mq:function(){return o},ad:function(){return c}}),r(2326);var n,s,i,a=r(63413);function o(){var t,e,r;return null!==(r=null===(e=globalThis.firebaseContext)||void 0===e?void 0:null===(t=e.getStore())||void 0===t?void 0:t.fbApp)&&void 0!==r?r:void 0}function c(){return(0,a.ad)(o())}(s=(n=i||(i={})).firestore||(n.firestore={})).Bytes=a.Jj,s.DocumentReference=a.my,s.GeoPoint=a.F8,s.Timestamp=a.EK},19998:function(t,e,r){r.d(e,{I:function(){return n}});function n(t,e){let r;if(void 0===t._translations)return t;if(null!=e){let n=e.split("-");for(let e=n.length;e>0;e--){let s=n.slice(0,e).join("-");if(void 0!==t._translations[s]&&null!=(r=t._translations[s]))return function t(e,r){let n=t=>null!=t&&"object"==typeof t&&!0!==Array.isArray(t);if(!0!==n(e)||!0!==n(r))return r;for(let s in r)!0===n(r[s])?(void 0===e[s]&&(e[s]={}),e[s]=t(e[s],r[s])):e[s]=r[s];return e}(t,r)}}return t}},16764:function(t,e,r){r.d(e,{n:function(){return D}});var n=r(50853),s=r(45811),i=r(64778),a=r(63413);let o=class extends i.m8{constructor(...t){super(...t),this.collections={}}};o=(0,n.gn)([i.Ej,i.Dx,i.nk],o);class c extends s.n{get(){return this.query().get(!0)}get active(){return this.query([(0,a.ar)("active","==",!0)])}constructor(t){super(t.collection(c.path),o)}}c.definitions={_:{}},c.path="abtests";var l=r(71368),u=r(83395),d=r(18402);let h=class extends i.m8{async get(t){if(!1===t)throw Error("DocumentSnapshot is not supported by this implementation.");let e=await super.get(!0);return"*"!==this.reference.parent.parent.id&&(e=(0,d.Z)(await D._.getById("*").Badges.getById(e.id).get(!0),e)),e}constructor(...t){super(...t),this.collections={}}};h=(0,n.gn)([i.Ej,i.nk],h);class p extends s.n{async all(){let t={},e=this.reference.parent.id,r="".concat(e,"-badges");try{let n=(0,l.ad)();if(!0!==(0,u.hl)())throw Error("IndexedDB is not available.");let s=await (0,a.L$)(n,r);if(null==s){let t=await fetch("/api/countries/".concat(e,"/seed?v=2"));if(!0===t.ok&&await (0,a.Pb)(n,t.body),s=await (0,a.L$)(n,r),null==s)throw Error("Unable to load Firestore query '".concat(r,"' from local cache."))}let i=(await (0,a.UQ)(s)).docs;for(let e of i)t[e.id]=e.data()}catch(e){t=await this.query().get(!0)}return"*"!==e&&(t=(0,d.Z)(await D._.getById("*").Badges.all(),t)),t}constructor(t){super(t.collection(p.path),h)}}p.definitions={_:{}},p.path="badges";var g=r(86815);let f=class extends i.m8{async get(t){if(!1===t)throw Error("DocumentSnapshot is not supported by this implementation.");let e=await super.get(!0);return"*"!==this.reference.parent.parent.id&&(e=(0,d.Z)(await D._.getById("*").Costs.getById(e.id).get(!0),e)),e}constructor(...t){super(...t),this.collections={}}};f=(0,n.gn)([i.Ej,i.nk],f);class y extends s.n{get active(){return this.all().then(t=>{for(let e in t)!0!==t[e].active&&delete t[e];return t})}async all(){let t={},e=this.reference.parent.id,r="".concat(e,"-costs");try{let n=(0,l.ad)();if(!0!==(0,u.hl)())throw Error("IndexedDB is not available.");let s=await (0,a.L$)(n,r);if(null==s){let t=await fetch("/api/countries/".concat(e,"/seed?v=2"));if(!0===t.ok&&await (0,a.Pb)(n,t.body),s=await (0,a.L$)(n,r),null==s)throw Error("Unable to load Firestore query '".concat(r,"' from local cache."))}let i=(await (0,a.UQ)(s)).docs;for(let e of i)t[e.id]=e.data()}catch(e){t=await this.query().get(!0)}return"*"!==e&&(t=(0,d.Z)(await D._.getById("*").Costs.all(),t)),t}constructor(t){super(t.collection(y.path),f)}}y.definitions={_:{}},y.path="costs";let w=class extends i.m8{async get(t){if(!1===t)throw Error("DocumentSnapshot is not supported by this implementation.");let e=await super.get(!0);return"*"!==this.reference.parent.parent.id&&(e=(0,d.Z)(await D._.getById("*").Groups.getById(e.id).get(!0),e)),e}constructor(...t){super(...t),this.collections={}}};w=(0,n.gn)([i.Ej,i.nk],w);class m extends s.n{async all(){let t={},e=this.reference.parent.id,r="".concat(e,"-groups");try{let n=(0,l.ad)();if(!0!==(0,u.hl)())throw Error("IndexedDB is not available.");let s=await (0,a.L$)(n,r);if(null==s){let t=await fetch("/api/countries/".concat(e,"/seed?v=2"));if(!0===t.ok&&await (0,a.Pb)(n,t.body),s=await (0,a.L$)(n,r),null==s)throw Error("Unable to load Firestore query '".concat(r,"' from local cache."))}let i=(await (0,a.UQ)(s)).docs;for(let e of i)t[e.id]=e.data()}catch(e){t=await this.query().get(!0)}return"*"!==e&&(t=(0,d.Z)(await D._.getById("*").Groups.all(),t)),t}constructor(t){super(t.collection(m.path),w)}}m.definitions={_:{}},m.path="groups";let v=class extends i.m8{constructor(...t){super(...t),this.collections={}}};v=(0,n.gn)([i.Ej,i.Dx,i.nk],v);class b extends s.n{get(){return this.query().get(!0)}get active(){return this.query([(0,a.ar)("active","==",!0),(0,a.Xo)("order","asc")])}async one(t){return this.query([(0,a.ar)("slug","==",t)]).get(!0)}async activeWithTags(t){return this.query([(0,a.ar)("active","==",!0),(0,a.ar)("tags","array-contains-any",t),(0,a.Xo)("order","asc")]).get(!0)}constructor(t){super(t.collection(b.path),v)}}b.definitions={_:{}},b.path="presets";let x=class extends i.m8{async get(t){if(!1===t)throw Error("DocumentSnapshot is not supported by this implementation.");let e=await super.get(!0);return"*"!==this.reference.parent.parent.id&&(e=(0,d.Z)(await D._.getById("*").Suppliers.getById(e.id).get(!0),e)),e}constructor(...t){super(...t),this.collections={}}};x=(0,n.gn)([i.nk],x);class _ extends s.n{async all(){let t=await this.query().get(!0);return"*"!==this.reference.parent.id&&(t=(0,d.Z)(await D._.getById("*").Suppliers.all(),t)),t}constructor(t){super(t.collection(_.path),x)}}_.definitions={_:{}},_.path="suppliers";var k=r(56299);let B=class extends i.m8{async get(t){if(!1===t)throw Error("DocumentSnapshot is not supported by this implementation.");let e=await super.get(!0);return"*"!==this.reference.parent.parent.id&&(e=(0,d.Z)(await D._.getById("*").Tasks.getById(e.id).get(!0),e)),e}constructor(...t){super(...t),this.collections={}}};B=(0,n.gn)([i.Ej,i.nk],B);class I extends s.n{async active(){let t=await this.all();for(let e in t)!0!==t[e].active&&delete t[e];return t}async all(){let t={},e=this.reference.parent.id,r="".concat(e,"-tasks");try{let n=(0,l.ad)();if(!0!==(0,u.hl)())throw Error("IndexedDB is not available.");let s=await (0,a.L$)(n,r);if(null==s){let t=await fetch("/api/countries/".concat(e,"/seed?v=2"));if(!0===t.ok&&await (0,a.Pb)(n,t.body),s=await (0,a.L$)(n,r),null==s)throw Error("Unable to load Firestore query '".concat(r,"' from local cache."))}let i=(await (0,a.UQ)(s)).docs;for(let e of i)t[e.id]=e.data()}catch(e){t=await this.query().get(!0)}return"*"!==e&&(t=(0,d.Z)(await D._.getById("*").Tasks.all(),t)),t}async getByGroup(t){let e=await this.all(),r={};for(let n in e)e[n].group===t&&(r[n]={...(0,k.Z)(["active","period","tags"],e[n]),done:!1});return r}constructor(t){super(t.collection(I.path),B)}}I.definitions={_:{}},I.path="tasks";let E=class extends i.m8{async get(t){if(!1===t)throw Error("DocumentSnapshot is not supported by this implementation.");let e=await super.get(!0);return"*"!==this.reference.parent.parent.id&&(e=(0,d.Z)(await D._.getById("*").TodayTaskFlows.getById(e.id).get(!0),e)),e}constructor(...t){super(...t),this.collections={}}};E=(0,n.gn)([i.Ej,i.nk],E);class A extends s.n{async all(){let t={},e=this.reference.parent.id,r="".concat(e,"-today-task-flows");try{let n=(0,l.ad)();if(!0!==(0,u.hl)())throw Error("IndexedDB is not available.");let s=await (0,a.L$)(n,r);if(null==s){let t=await fetch("/api/countries/".concat(e,"/seed?v=2"));if(!0===t.ok&&await (0,a.Pb)(n,t.body),s=await (0,a.L$)(n,r),null==s)throw Error("Unable to load Firestore query '".concat(r,"' from local cache."))}let i=(await (0,a.UQ)(s)).docs;for(let e of i)t[e.id]=e.data()}catch(e){t=await this.query().get(!0)}return"*"!==e&&(t=(0,d.Z)(await D._.getById("*").TodayTaskFlows.all(),t)),t}get(){return this.query().get(!0)}get active(){return this.query([(0,a.ar)("isActive","==",!0)])}constructor(t){super(t.collection(A.path),E)}}A.definitions={_:{}},A.path="today-task-flows";let q=class extends i.m8{get adminUser(){return this.get(!0).then(t=>{var e;return(null!==(e=t.admins)&&void 0!==e?e:[]).length>0?t.admins.shift():"*"!==this.id?D._.getById("*").adminUser:null})}get adminUsers(){let t=[this.get(!0)];return"*"!==this.id&&t.unshift(D._.getById("*").get(!0)),Promise.all(t).then(t=>{let e=new Set;for(let n of t){var r;let t=null!==(r=n.admins)&&void 0!==r?r:[];for(let r of t)e.add(r)}return[...e]})}async getActiveTasks(t){if(null!=t)throw Error("Not implemented.");return this.collections.Tasks.active()}async getAllTasks(t){if(null!=t)throw Error("Not implemented.");return this.collections.Tasks.all()}async getCosts(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(null!=t)throw Error("Not implemented.");let r=await this.collections.Costs.all();if(!0!==e)for(let t in r)r[t]=(0,k.Z)(["targets"],r[t]);return r}async getGroups(t){if(null!=t)throw Error("Not implemented.");return this.collections.Groups.all()}async getSupplier(){return this.collections.Suppliers.all()}constructor(...t){super(...t),this.collections={ABTests:new c(this),Badges:new p(this),Cards:new g.o(this),Costs:new y(this),Groups:new m(this),Presets:new b(this),Suppliers:new _(this),Tasks:new I(this),TodayTaskFlows:new A(this)}}};q=(0,n.gn)([i.Ej,i.nk],q);class D extends s.n{static get _(){return new this}constructor(){super(D.path,q)}}D.definitions={_:{}},D.path="countries"},86815:function(t,e,r){r.d(e,{o:function(){return l}});var n=r(50853),s=r(45811),i=r(64778),a=r(16764),o=r(63413);let c=class extends i.m8{constructor(...t){super(...t),this.collections={}}};c=(0,n.gn)([i.Ej,i.Dx,i.nk],c);class l extends s.n{static featured(t){return a.n._.getById(t).Cards.query([(0,o.ar)("featured","==",!0)]).get()}static one(t){return a.n._.getById(t).Cards.query([(0,o.ar)("featured","==",!0)]).get()}constructor(t){super(t.collection(l.path),c)}}l.definitions={_:{}},l.path="cards"},82828:function(t,e,r){r.d(e,{O:function(){return F}});var n=r(50853),s=r(45811),i=r(64778),a=r(49034);let o=class extends i.m8{constructor(...t){super(...t),this.collections={}}};o=(0,n.gn)([i.Ej,i.Dx,i.nk],o);class c extends s.n{get wedding(){return F._.getById(this.reference.parent.id)}reset(){return Promise.all([this.wedding.remove("budget","costs"),this.delete(!0)])}resetCosts(){return this.reset()}constructor(t){super(t.collection(c.path),o)}}c.definitions={_:{}},c.path="costs";let l=class extends i.m8{constructor(...t){super(...t),this.collections={}}};l=(0,n.gn)([i.Ej,i.Dx,i.nk],l);class u extends s.n{get wedding(){return F._.getById(this.reference.parent.id)}constructor(t){super(t.collection(u.path),l)}}u.definitions={_:{}},u.path="feedback";var d=r(95156),h=r(47076);let p=class extends i.m8{constructor(...t){super(...t),this.collections={}}};p=(0,n.gn)([i.Ej,i.Dx,i.nk],p);class g extends s.n{get wedding(){return F._.getById(this.reference.parent.id)}constructor(t){super(t.collection(g.path),p)}}g.definitions={_:{}},g.path="keywords";let f=class extends i.m8{constructor(...t){super(...t),this.collections={}}};f=(0,n.gn)([i.Ej,i.Dx,i.nk],f);class y extends s.n{get wedding(){return F._.getById(this.reference.parent.id)}constructor(t){super(t.collection(y.path),f)}}y.definitions={_:{}},y.path="notes";let w=class extends i.m8{constructor(...t){super(...t),this.collections={}}};w=(0,n.gn)([i.Ej,i.Dx,i.nk],w);class m extends s.n{get wedding(){return F._.getById(this.reference.parent.id)}constructor(t){super(t.collection(m.path),w)}}m.definitions={_:{}},m.path="photos";let v=class extends i.m8{constructor(...t){super(...t),this.collections={}}};v=(0,n.gn)([i.Dx,i.nk],v);let b=class extends i.m8{constructor(...t){super(...t),this.collections={}}};b=(0,n.gn)([i.Dx,i.nk],b);let x=class extends i.m8{constructor(...t){super(...t),this.collections={}}};x=(0,n.gn)([i.Dx,i.nk],x);let _=class extends i.m8{constructor(...t){super(...t),this.collections={}}};_=(0,n.gn)([i.Dx,i.nk],_);let k=class extends i.m8{constructor(...t){super(...t),this.collections={}}};k=(0,n.gn)([i.Dx,i.nk],k);let B=class extends i.m8{constructor(...t){super(...t),this.collections={}}};B=(0,n.gn)([i.Ej,i.Dx,i.nk],B);class I extends s.n{getById(t,e){let r;switch(t){case"cakes":r=new s.n(this.reference,v);break;case"florist":r=new s.n(this.reference,b);break;case"photo":r=new s.n(this.reference,x);break;case"venue":r=new s.n(this.reference,_);break;case"video":r=new s.n(this.reference,k);break;default:throw Error("Unhandled supplier type.")}return r.getById(t,e)}get wedding(){return F._.getById(this.reference.parent.id)}constructor(t){super(t.collection(I.path),B)}}I.definitions={_:{}},I.path="preferences";var E=r(18402);let A=class extends i.m8{constructor(...t){super(...t),this.collections={}}};A=(0,n.gn)([i.Dx,i.nk],A);class q extends s.n{static new(t,e){let r={};return"_"!==t&&t in q.definitions&&(r=r[t]||{}),null!=e&&(r=(0,E.Z)(r,e)),r}async getPremium(){return this.getById("premium").get()}async setPremium(t){return this.getById("premium").update(t)}get wedding(){return F._.getById(this.reference.parent.id)}constructor(t){super(t.collection(q.path),A)}}q.definitions={_:{}},q.path="subscriptions";var D=r(30431),T=r(59029);let j=class extends i.m8{constructor(...t){super(...t),this.collections={}}};j=(0,n.gn)([i.Ej,i.Dx,i.nk],j);class P extends s.n{static new(t,e){let r={};return"_"!==t&&t in P.definitions&&(r=r[t]||{}),null!=e&&(r=(0,E.Z)(r,e)),r}get wedding(){return F._.getById(this.reference.parent.id)}async isMember(t){try{return(await this.getById(t).get(!1)).exists()}catch(t){return!1}}constructor(t){super(t.collection(P.path),j)}}P.definitions={_:{}},P.path="users";var C=r(63413),S=r(38564);let Z=class extends i.m8{get country(){return this.getCountry()}async getCountry(){return(0,S.Z)("GB",["l10n","country"],await this.get())}getPremium(){return this.collections.Subscriptions.getPremium()}getShortlistedVenues(){return this.collections.Suppliers.getShortlisted("venue")}setPremium(t){return this.collections.Subscriptions.setPremium(t)}updateCountry(t){return this.set({l10n:{country:t.country},location:{adminArea:(0,C.AK)(),city:(0,C.AK)(),country:t.country,name:t.getCountryName(),postalCode:(0,C.AK)(),provider:(0,C.AK)(),street:(0,C.AK)()}},!0)}constructor(...t){super(...t),this.collections={Badges:new a.a(this),Costs:new c(this),Files:new d.h(this),Feedback:new u(this),Guests:new h.x(this),Keywords:new g(this),Notes:new y(this),Photos:new m(this),Preferences:new I(this),Subscriptions:new q(this),Suppliers:new D.$(this),Tasks:new T.h(this),Users:new P(this)}}};Z=(0,n.gn)([i.Ej,i.Dx,i.nk],Z);class F extends s.n{static new(t,e){let r={guests:{categories:{data:{"00000000-0000-4000-8000-000000000001":"me","00000000-0000-4000-8000-000000000002":"partner"},sort:["00000000-0000-4000-8000-000000000001","00000000-0000-4000-8000-000000000002"]},count:0},location:null,notes:{count:0},partners:["",""],planningStage:{hasBudget:!1,hasGuests:!1,hasNotStarted:!1,hasVenue:!1,hasVenueStyle:!1,hasWeddingDate:!1},roles:["",""],suppliers:{count:0},tasks:{done:0,total:0}};return"_"!==t&&t in F.definitions&&(r=r[t]||{}),null!=e&&(r=(0,E.Z)(r,e)),r}static get _(){return new this}constructor(){super(F.path,Z)}}F.definitions={_:{}},F.path="weddings"},49034:function(t,e,r){r.d(e,{a:function(){return c}});var n=r(50853),s=r(45811),i=r(64778),a=r(82828);let o=class extends i.m8{constructor(...t){super(...t),this.collections={}}};o=(0,n.gn)([i.Ej,i.Dx,i.nk],o);class c extends s.n{get wedding(){return a.O._.getById(this.reference.parent.id)}static achieved(t){return t.counters.current>=t.counters.minimum}async increment(t){return await this.getById(t).increment("counters.current")}constructor(t){super(t.collection(c.path),o)}}c.definitions={_:{}},c.path="badges"},95156:function(t,e,r){r.d(e,{h:function(){return l}});var n=r(50853),s=r(45811),i=r(64778),a=r(82828),o=r(18402);let c=class extends i.m8{constructor(...t){super(...t),this.collections={}}};c=(0,n.gn)([i.Ej,i.Dx,i.nk],c);class l extends s.n{static new(t,e){let r={};return"_"!==t&&t in l.definitions&&(r=r[t]||{}),null!=e&&(r=(0,o.Z)(r,e)),r}get wedding(){return a.O._.getById(this.reference.parent.id)}constructor(t){super(t.collection(l.path),c)}}l.definitions={_:{}},l.path="files"},47076:function(t,e,r){r.d(e,{x:function(){return u}});var n=r(50853),s=r(45811),i=r(64778),a=r(82828),o=r(63413),c=r(18402);let l=class extends i.m8{constructor(...t){super(...t),this.collections={}}};l=(0,n.gn)([i.Ej,i.Dx,i.nk],l);class u extends s.n{static new(t,e){let r={events:{wedding:{attending:null,invitation:""}},gender:null,head:null};return"_"!==t&&t in u.definitions&&(r=r[t]||{}),null!=e&&(r=(0,c.Z)(r,e)),r}get wedding(){return a.O._.getById(this.reference.parent.id)}removeCategory(t){return this.wedding.set({guests:{categories:{data:{[t]:(0,o.AK)()},sort:(0,o.Ab)(t)}}})}removeTable(t){return this.wedding.set({guests:{tables:{data:{[t]:(0,o.AK)()},sort:(0,o.Ab)(t)}}})}async reset(){let t=a.O.new("_").guests,e=await this.wedding.get();if(null!=e){var r,n;(null===(r=e.guests)||void 0===r?void 0:r.estimate)!=null&&(t.estimate=null===(n=e.guests)||void 0===n?void 0:n.estimate)}return await Promise.all([this.wedding.update({guests:t}),this.delete(!0)])}resetGuestList(){return this.reset()}upsertCategory(t,e){return this.wedding.set({guests:{categories:{data:{[t]:e},sort:(0,o.vr)(t)}}})}upsertTable(t,e){return this.wedding.set({guests:{tables:{data:{[t]:e},sort:(0,o.vr)(t)}}})}constructor(t){super(t.collection(u.path),l)}}u.definitions={_:{},address:{},gender:{}},u.path="guests"},30431:function(t,e,r){r.d(e,{$:function(){return u}});var n=r(50853),s=r(45811),i=r(64778),a=r(82828),o=r(63413),c=r(18402);let l=class extends i.m8{constructor(...t){super(...t),this.collections={}}};l=(0,n.gn)([i.Ej,i.Dx,i.nk],l);class u extends s.n{static new(t,e){let r={};return"_"!==t&&t in u.definitions&&(r=r[t]||{}),null!=e&&(r=(0,c.Z)(r,e)),r}get wedding(){return a.O._.getById(this.reference.parent.id)}async add(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.getById(t.id);return await r.get()==null?r.create(t):r.set(t,!e||["booked"])}getIgnored(t){return null==t?this.query([(0,o.ar)("ignored","==",!0)]).get():this.query([(0,o.ar)("type","==",t),(0,o.ar)("ignored","==",!0)]).get()}getShortlisted(t){return null==t?this.query([(0,o.ar)("shortlisted","==",!0)]).get():this.query([(0,o.ar)("type","==",t),(0,o.ar)("shortlisted","==",!0)]).get()}constructor(t){super(t.collection(u.path),l)}}u.definitions={_:{},address:{},contacts:{}},u.path="suppliers"},59029:function(t,e,r){r.d(e,{h:function(){return p}});var n=r(50853),s=r(45811),i=r(7953),a=r(64778),o=r(16764),c=r(82828),l=r(63413),u=r(18402),d=r(25997);let h=class extends a.m8{constructor(...t){super(...t),this.collections={}}};h=(0,n.gn)([a.Ej,a.Dx,a.nk],h);class p extends s.n{get wedding(){return c.O._.getById(this.reference.parent.id)}get next(){return this.query([(0,l.ar)("done","==",!1),(0,l.Xo)("order","asc")])}async getByGroup(t){let e=await o.n._.getById(await this.wedding.country).Tasks.getByGroup(t),r=await this.query([(0,l.Xo)("order","asc")]).get(!0),n={};for(let s in r)r[s].group===t&&(n[s]=void 0!==e[s]?(0,u.Z)(e[s],r[s]):r[s]);return n}async deleteByIds(t){if(0===t.length)return;let e=(0,d.Z)(250,t);for(let t of e){for(let e of(this.begin(),t))await this.getById(e).delete();await this.commit()}}query(t,e){let r=[(0,l.Xo)("group"),(0,l.ar)("group","!=",p.todayTaskGroupId)];return null==t?t=(0,l.IO)(this.reference,...r,(0,l.Xo)("__name__")):Array.isArray(t)&&(t=(0,l.IO)(this.reference,...r,...t)),new i.$(t,e)}queryTodayTasks(t){let e=[(0,l.ar)("group","==",p.todayTaskGroupId),(0,l.Xo)("__name__")];return new i.$((0,l.IO)(this.reference,...e),t)}constructor(t){super(t.collection(p.path),h)}}p.definitions={_:{}},p.path="tasks",p.todayTaskGroupId="7a1bb849-a468-4313-8231-ac8f5eb7e6b6"},82560:function(t,e,r){r.d(e,{C:function(){return a}});var n=r(92651),s=r(60985),i=r(15655);let a=(0,s.createSelectorCreator)(i.PW,n.Z)}}]);